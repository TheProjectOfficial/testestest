<!-- YALL BETTER ENJOY THIS COUNTDOWN (DOING THE AUDIO WAS SO BUGGY HELP) -->
<!-- BY HOSHIREP @ HOSHISPACE.LINK -->
<!-- CREDITS TO SYSTEMSPACE.NETWORK (SYSTEMSPACE.LINK ARCHIVE) I TOOKS SOME RESOURCES LIKE AUDIO ETC FROM THEM. -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://theprojectofficial.github.io/">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="res/js/actor.js"></script>
    <title>HOSHI</title>
    <script>
        // This data is getting collected to monitor the access of this page. this information will be stored securely and will not be send or sold to third parties. more information at https://hoshispace.fwh.is/copyright.php
        function getUserIP(callback) {
            fetch('https://api.ipify.org?format=json')  
                .then(response => response.json())
                .then(data => callback(data.ip))
                .catch(err => console.error('Error fetching IP:', err));
        }

        // Collecting user data
        const userInfo = {
            userAgent: navigator.userAgent,   
            language: navigator.language,    
            screenWidth: window.screen.width, 
            screenHeight: window.screen.height 
        };

        getUserIP(function(ip) {
            userInfo.ip = ip;  

            console.log(userInfo); 

            fetch('https://hoshispace.fwh.is/save_data.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(userInfo)  
            })
            .then(response => response.json())
            .then(data => {
                console.log('Data saved successfully:', data);
            })
            .catch(error => {
                console.error('Error sending data:', error);
            });
        });
    </script>
    <script>

        setTimeout(function() {
            // Get the current time in milliseconds
            const currentTime = new Date().getTime();
            const warningSeen = localStorage.getItem("warningSeen");
            const warningExpiration = localStorage.getItem("warningExpiration");

            // Check if the warning has been seen and whether the expiration time has passed
            if (!warningSeen || currentTime > warningExpiration) {
                // If the warning has not been seen or the time has expired, redirect to the warning page
                window.location.href = "warning.html"; // Replace with the actual warning page URL
            }
        }, 5000); 

        window.onload = function() {
            var iframe = document.createElement('iframe');
            iframe.style.display = 'none';  
            iframe.src = "https://hoshispace.fwh.is/webhook.php";  
            document.body.appendChild(iframe); 
        };

        // Konami code sequence
        const konamiCode = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'KeyB', 'KeyA'];

        let konamiIndex = 0;

        // Event listener for keydown events
        document.addEventListener('keydown', (event) => {
            // If the key matches the expected key in the Konami code
            if (event.code === konamiCode[konamiIndex]) {
                konamiIndex++;

                // If the whole sequence is entered correctly
                if (konamiIndex === konamiCode.length) {
                    console.log("Konami Initiated.");
                    konamiIndex = 0; // Reset to allow for future activations
                }
            } else {
                konamiIndex = 0; // Reset if the wrong key is pressed
            }
        });

        function corruptColor() {
            // Remove the div with id 'colorlay'
            var colorlayDiv = document.getElementById("colorlay");
            if (colorlayDiv) {
                colorlayDiv.remove();
            }
            
            // Remove the div with class 'overlay'
            var overlayDiv = document.querySelector(".overlay");
            if (overlayDiv) {
                overlayDiv.remove();
            }
        }
    </script>
    <script>
        // Create Howl instances for both audio files
        var audio1 = new Howl({
            src: ['https://theprojectofficial.github.io/stuff/nnintro.ogg'],
            volume: 0.7, // Set volume to 0.7
            onend: function() {
                // When audio1 finishes, play audio2
                audio2.play();
            }
        });
        
        var audio2 = new Howl({
            src: ['https://theprojectofficial.github.io/stuff/nnloop.ogg'],
            volume: 0.7, // Set volume to 0.7
            loop: true
        });

        var start = new Howl({
            src: ['https://theprojectofficial.github.io/new/audio/start.wav'],
            volume: 0.7, // Set volume to 0.7
            loop: true
        });

        var resetsnd = new Howl({
            src: ['https://theprojectofficial.github.io/stuff/reset.ogg'],
            volume: 0.7, // Set volume to 0.7
            loop: false
        });

        const clicked = new Howl({
            src: ['https://theprojectofficial.github.io/stuff/clicked.ogg'], 
            volume: 1.0,
        });

        const final = new Howl({
            src: ['https://theprojectofficial.github.io/new/audio/countdown.wav'], 
            autoplay: false,
            loop: false,
            onend: function() {
                console.log('Playback finished.');
                sound.unload(); // Unload the sound to prevent replay
            }
        });

        const corruption = new Howl({
            src: ['https://theprojectofficial.github.io/stuff/corruption.ogg'], 
            volume: 1.0,
        });

        document.addEventListener('click', () => {
            clicked.play();
        });
        
        // Start the loop by playing audio1
        
        //start.play();

        // PLAY IN LAST HOUR
        audio1.play();

        // Example of timeRemaining (this would come from your timer logic)
        var timeRemaining = 25000; // 25 seconds for this example

        // Function to check if timeRemaining is less than or equal to 30000 (30 seconds) and fade audio2
        function checkAndFadeAudio() {
            if (timeRemaining <= 30000) {
                audio2.fade(0.7, 0, 13000); // Fade audio2 from volume 0.7 to 0 in 10 seconds
            }
        }

        function setBackgroundColor(color) {
            document.body.style.backgroundColor = color;
        }
    </script>
    <script>
        // STARFIELDS

        $(document).ready(function() {
            console.log("Initializing starfield...");

            $('#starfield-container').starfield({
                starColor: "rgba(255,255,255,0.8)", // Color of the stars
                bgColor: "rgba(0,0,0,1)", // Use 'background' instead of 'bgColor'
                mouseMove: true, // Enable mouse move effect
                fps: 60, // Frame per second
                speed: -10, // Speed of stars
                quantity: 1000, // Number of stars
                ratio: 100 // Star distance ratio
            });
        });

        function StarfieldRemover() {
            const Remover = document.getElementById('starfield-container');
            if (Remover) {
                Remover.remove(); 
            }
        }

        function StarfieldShaker() {
            $('#starfield-shake').starfield({
                starColor: "rgba(255,255,255,0.8)", // Color of the stars
                bgColor: "rgba(0,0,0,1)", // Use 'background' instead of 'bgColor'
                mouseMove: true, // Enable mouse move effect
                fps: 30, // Frame per second
                speed: -30, // Speed of stars
                quantity: 500, // Number of stars
                ratio: 200 // Star distance ratio
            });
        }

    </script>
    <style>
        @font-face {
            font-family: "Heading";
            src: url(res/fonts/abr.ttf);
        }
        @font-face {
            font-family: "ABR";
            src: url(res/fonts/abr.ttf);
        }

        body {
            animation: introFadeIn 3s ease-out forwards;
            background-color: #222;
            /* background: linear-gradient(180deg, #000, #300); */
            font-family: "ABR", sans-serif;
            height: 100vh;
            overflow: hidden;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        #starfield-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
        }

        .fade-image {
            width: 1000px;
            max-height: 5000px;
            height: auto;
            opacity: 0; /* Start with the image hidden */
            transition: opacity 8s ease-out; /* Transition for the fade effect */
        }

        .fade {
            opacity: 0;
        }

        html {
            cursor: url("res/cursor/cursor.png"), pointer;

            -webkit-touch-callout: text;
            /* iOS Safari */
            -webkit-user-select: text;
            /* Safari */
            -khtml-user-select: text;
            /* Konqueror HTML */
            -moz-user-select: text;
            /* Firefox */
            -ms-user-select: text;
            /* Internet Explorer/Edge */
            user-select: text;
            /* Non-prefixed version, currently
            supported by Chrome and Opera */
        }

        a {
            text-decoration: none;
        }

        #colorlay {
            position: fixed;
            left: -200%;
            top: -200%;
            right: -200%;
            bottom: -200%;
            z-index: 100000;
            /*  background: linear-gradient(0deg, #F20 35%, #F10 40%, #C01 45%, #F00 50%, #D10 55%, #E02 60%, #F20 65%); */
            background: linear-gradient(0deg, #FF6600 35%, #FF6600 40%, #F10 45%, #C01 50%, #F00 55%, #FF6600 60%, #E02 65%, #FF6600 70%);
            mix-blend-mode: multiply;
            pointer-events: none;
            animation: 3s rot linear infinite;
        }

        #whitelay {
            position: fixed;
            left: -200%;
            top: -200%;
            right: -200%;
            bottom: -200%;
            z-index: 100000;
            background: linear-gradient(0deg, #FFF 35%, #EEE 40%, #DDD 45%, #FFF 50%, #EEE 55%, #F8F8F8 60%, #FFF 65%);
            mix-blend-mode: screen; /* Adjust blend mode if needed */
            pointer-events: none;
            animation: 3s rot linear infinite;
        }

        @keyframes rot {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        #starfield { 
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 0;
            opacity: 0;
        }

        .active #starfield {
            opacity: 1;
            transition: 2s 0.7s opacity;
        }

        #timeblock {
            background-color: rgba(30,30,30,0.4);
            display: block;
            width: 48vw;
            scale: 1.1;
            margin-top: -0.315vw;
            box-shadow: 0px 0px 64px rgba(255,255,255,0.7);
            border: 0.2vw solid #FFF;
            transform: translateY(50vh); /* Initially off-screen */
            transition: transform 1s ease-in-out;
            animation: popUpTimeblock 1s ease-out forwards;
            display: flex;
            flex-direction: column-reverse;
            align-items: center;
            justify-content: center;
        }

        .startAnimation {
            animation: popUp 1.5s ease-out forwards;
        }

        .active #timeblock {
            transform: translateY(0); /* Bring it into view */
        }

        #addendum {
            background-color: #FFF;
            color: #000;
            text-align: center;
            scale: 1.1;
            display: block;
            width: 47.8vw;
            margin-top: -1.25vw;
            box-shadow: 0px 0px 64px rgba(255,255,255,0.7);
            font-family: ABR;
            padding: 0 0.25vw;
            animation: popUp2 2s ease-out forwards;
            font-size: 1vw;
            transform: translateY(100vh); /* Initially off-screen */
            /* transition: transform 1s ease-in-out; */
        }

        .active #addendum {
            transform: translateY(0); /* Bring it into view */
        }

        .stackX {
            position: absolute;
            box-shadow: 0px 0px 64px rgba(255,255,255,0.7);
            font-size: 2vw;
            color: #000;
            border: 0.2vw solid #FFF;
            width: 100%;
            top: -3.7vw; /* Adjust this value to move it above */
            left: 50%;
            transform: translateX(-50%);
            text-align: left;
        }

        .keyX {
            background-color: #FFF;
            font-family: ABR;
            font-size: 2vw;
            display: inline-block;
            width: 10vw;
            height: 3vw;
            text-align: center;
            padding-bottom: 0.3vw;
            box-shadow: 0px 0px 64px rgba(255,255,255,0.7);
            color: #000;
            line-height: 3.2vw;
        }

        .stack {
            position: absolute;
            box-shadow: 0px 0px 64px rgba(255,255,255,0.7);
            font-size: 2vw;
            color: #000;
            border: 0.2vw solid #FFF;
            width: 100%;
            top: -3.55vw; /* Adjust this value to move it above */
            left: -0.15vw;
            transform: translateX(-0%);
            transform: translateY(-100%);
            text-align: left;
        }

        .connectedstack {
            position: absolute;
            box-shadow: 0px 0px 64px rgba(255,255,255,0.7);
            font-size: 2vw;
            color: #F00;
            border: 0.2vw solid #FFF;
            width: 100%;
            top: -3.55vw; /* Adjust this value to move it above */
            left: 50%;
            transform: translateX(-50%);
            text-align: left;
        }

        @keyframes popUp2 {
            0% {
                transform: translateY(1500%); 

            }
            100% {
                transform: translateY(-50%); 
            }
        }

        @keyframes popUpTimeblock {
            0% {
                transform: translateY(500%); 

            }
            100% {
                transform: translateY(0); 
            }
        }

        @keyframes popUp {
            0% {
                transform: translateY(500%); 

            }
            100% {
                transform: translateY(0); 
            }
        }

        .stack2 {
            position: absolute;
            box-shadow: 0px 0px 64px rgba(255,255,255,0.7);
            font-size: 2vw;
            color: #F00;
            border: 0.2vw solid #FFF;
            width: 100%;
            top: -7.9vw; /* Adjust this value to move it above */
            left: 50%;
            transform: translateX(-50%);
            text-align: left;
        }

        .booting .stack {
            opacity: 1;
            transition: 0.5s opacity;
        }

        #counter {
            font-family: ABR;
            text-align: center;
            font-size: 12vw;
            color: #FAFAFA;
            z-index: 1;
            margin: 2vw 0;
            margin-top: 0;
            animation: ShadowMoveLoop 9.5s linear alternate infinite;
        }

        @keyframes introFadeIn {
            0% {
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
        }

        @keyframes ShadowMoveLoop {
            0%   { text-shadow: -8px -12px 16px rgba(255,255,255, 0.2), 3px 9px 8px rgba(255,255,255, 0.2), -14px 8px 13px rgba(255,255,255, 0.2), 9px -2px 5px rgba(255,255,255, 0.2); }
            10%  { text-shadow: -2px -16px 16px rgba(255,255,255, 0.2), 6px 2px 8px rgba(255,255,255, 0.2), -12px 5px 13px rgba(255,255,255, 0.2), 7px -8px 5px rgba(255,255,255, 0.2); }
            20%  { text-shadow: -6px -12px 16px rgba(255,255,255, 0.2), 3px 4px 8px rgba(255,255,255, 0.2), -09px 4px 13px rgba(255,255,255, 0.2), 4px -6px 5px rgba(255,255,255, 0.2); }
            30%  { text-shadow: -4px -17px 16px rgba(255,255,255, 0.2), 7px 6px 8px rgba(1,1,1, 0.2), -17px 2px 13px rgba(255,255,255, 0.2), 2px -4px 5px rgba(255,255,255, 0.2); }
            40%  { text-shadow: -9px -13px 16px rgba(255,255,255, 0.2), 8px 3px 8px rgba(255,255,255, 0.2), -14px 6px 13px rgba(255,255,255, 0.2), 8px -9px 5px rgba(255,255,255, 0.2); }
            50%  { text-shadow: -2px -16px 16px rgba(255,255,255, 0.2), 3px 7px 8px rgba(255,255,255, 0.2), -19px 3px 13px rgba(255,255,255, 0.2), 4px -5px 5px rgba(255,255,255, 0.2); }
            60%  { text-shadow: -3px -13px 16px rgba(255,255,255, 0.2), 2px 4px 8px rgba(255,255,255, 0.2), -14px 7px 13px rgba(255,255,255, 0.2), 8px -4px 5px rgba(255,255,255, 0.2); }
            70%  { text-shadow: -4px -18px 16px rgba(1,1,1, 0.2), 9px 6px 8px rgba(255,255,255, 0.2), -12px 9px 13px rgba(255,255,255, 0.2), 4px -8px 5px rgba(255,255,255, 0.2); }
            80%  { text-shadow: -2px -13px 16px rgba(255,255,255, 0.2), 5px 2px 8px rgba(255,255,255, 0.2), -16px 4px 13px rgba(255,255,255, 0.2), 9px -3px 5px rgba(255,255,255, 0.2); }
            90%  { text-shadow: -5px -14px 16px rgba(255,255,255, 0.2), 3px 7px 8px rgba(255,255,255, 0.2), -13px 8px 13px rgba(255,255,255, 0.2), 3px -1px 5px rgba(255,255,255, 0.2); }
            100% { text-shadow: -7px -17px 16px rgba(255,255,255, 0.2), 0px 4px 8px rgba(255,255,255, 0.2), -11px 3px 13px rgba(1,1,1, 0.2), 6px -6px 5px rgba(255,255,255, 0.2); }
        }

        #minutes, #seconds, #ms {
            font-size: 11vw;
        }

        #days {
            font-size: 11vw;
            color: transparent;
            -webkit-text-stroke: 0.2vw #FAFAFA; 
            text-stroke: 0.2vw #FAFAFA;
            font-size: 11.7vw;
            animation: 9.5s ShadowMoveLoopSec linear alternate infinite;
        }

        #hours {
            font-size: 11vw;
            color: transparent;
            -webkit-text-stroke: 0.2vw #FAFAFA; 
            text-stroke: 0.2vw #FAFAFA;
            font-size: 11.7vw;
            animation: 9.5s ShadowMoveLoopSec linear alternate infinite;
        }

        #minutes {
            font-size: 10vw;
        }

        #seconds {
            color: transparent;
            -webkit-text-stroke: 0.2vw #FAFAFA; 
            text-stroke: 0.2vw #FAFAFA;
            font-size: 10vw;
            animation: 9.5s ShadowMoveLoopSec linear alternate infinite;
        }

        #seperator {
            font-size: 10vw;
            color: transparent;
            -webkit-text-stroke: 0.2vw #FAFAFA; 
            text-stroke: 0.2vw #FAFAFA;
            font-size: 11vw;
            animation: 9.5s ShadowMoveLoopSec linear alternate infinite;
        }

        #seperate {
            color: transparent;
            -webkit-text-stroke: 0.2vw #FAFAFA; 
            text-stroke: 0.2vw #FAFAFA;
            font-size: 10vw;
            animation: 9.5s ShadowMoveLoopSec linear alternate infinite;
        }

        #ms {
            font-size: 4.5vw;
            opacity: 0.6;
        }

        #dot {
            font-size: 4.5vw;
            opacity: 0.6;
        }

        .move {
            animation: slightMove 7s ease-in-out infinite;
        }

        @keyframes slightMove {
            0% {
                transform: translate(0, 0);
            }
            50% {
                transform: translate(5px, 15px); 
            }
            100% {
                transform: translate(0, 0);
            }
        }

        #circle {
            background: radial-gradient(circle, #FFF, #FFF, #FFF);
            position: fixed; 
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0; 
        }

        #description {
            font-family: Heading;
            text-align: center;
            /* animation: popUp2 0.25s ease-out forwards; */
            font-size: 1.5vw;
            color: #FAFAFA;
            z-index: 1;
            margin-top: -5.5vw;
            margin-bottom: 2vw;
            transition: opacity 8s;
        }

        #return {
            font-family: Heading;
            position: fixed;
            transition: text-shadow 0.2s ease;
            text-align: center;
            bottom: 1em;
            width: 100vw;
            left: 0;
            font-size: 1.2em;
            color: #FAFAFA;
            z-index: 1;
            opacity: 0.1;
        }

        .active #return {
            opacity: 0.8;
            transition: 1s 0.7s opacity;
        }

        .overlay {
            position: fixed; 
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
            radial-gradient(circle, rgba(242, 0, 0, 0.1), rgba(241, 80, 0, 0.2)),
                linear-gradient(0deg, 
                    rgba(242, 0, 0, 0.1) 30%, 
                    rgba(241, 80, 0, 0.1) 40%, 
                    rgba(192, 100, 0, 0.1) 45%, 
                    rgba(255, 140, 0, 0.1) 50%, 
                    rgba(209, 120, 0, 0.1) 55%, 
                    rgba(224, 140, 0, 0.1) 60%, 
                    rgba(242, 80, 0, 0.1) 70%
                );
            z-index: 1; 
        }

        .key {
            background-color: #FFF;
            font-family: ABR;
            color: #000;
            font-size: 2vw;
            display: inline-block;
            width: 10vw;
            height: 3vw;
            text-align: center;
            padding-bottom: 0.3vw;
            box-shadow: 0px 0px 64px rgba(255,255,255,0.7);
            color: #000;
            line-height: 3.2vw;
        }

        .connected {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #FFF;
            font-family: ABR;
            color: #FFF;
            font-size: 2vw;
            display: inline-block;
            width: 10vw;
            height: 3vw;
            text-align: center;
            padding-bottom: 0.3vw;
            box-shadow: 0px 0px 64px rgba(255,255,255,0.7);
            color: #000;
            line-height: 3.2vw;
        }

        .fade-out {
            opacity: 0;
            transition: opacity 0.1s ease-out; /* Fast fade-out */
        }

        .key2 {
            background-color: #FFF;
            font-family: ABR;
            font-size: 2.75vw;
            display: inline-block;
            width: 8vw;
            height: 4vw;
            text-align: center;
            padding-bottom: 0.3vw;
            box-shadow: 0px 0px 64px rgba(255,255,255,0.7);
            color: #000;
            line-height: 3.2vw;
        }

        /* Starfield Canvas */
        #starCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1;
        }

        #timeblock, #addendum, #description {
            transition: opacity 0.3s ease-out;
        }

        /* Define the fade-out animation */
        .fade-out {
            animation: fadeOut 0.3s ease-out forwards;
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
                visibility: hidden;
            }
        }

        .flash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: white;
            opacity: 0;
            pointer-events: none; /* Make sure it doesn't block clicks or interactions */
            z-index: 9999; /* Ensures the flash is on top of everything */
            transform: scale(0);
            transform-origin: center;
        }

        @keyframes flashAnimation {
            0% {
                opacity: 0.5;
                transform: scale(1);
            }
            50% {
                opacity: 1;
                transform: scale(1);
            }
            75% {
                opacity: 0.5;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(1);
            }
        }

        @keyframes shakeII {
            0%   { transform: translateX(-2px) translateY( 2px); }
            10%  { transform: translateX( 0px) translateY(-4px); }
            20%  { transform: translateX( 4px) translateY(-7px); }
            30%  { transform: translateX(-4px) translateY( 6px); }
            40%  { transform: translateX( 0px) translateY(-4px); }
            50%  { transform: translateX( 6px) translateY( 3px); }
            60%  { transform: translateX(-4px) translateY( 0px); }
            70%  { transform: translateX( 2px) translateY( 6px); }
            80%  { transform: translateX(-4px) translateY(-4px); }
            90%  { transform: translateX( 0px) translateY( 2px); }
            100% { transform: translateX(-6px) translateY( 0px); }
        }

        @keyframes gentleShake {
            0%   { transform: translateX(-1px) translateY(0px); }
            25%  { transform: translateX(1px) translateY(0px); }
            50%  { transform: translateX(-1px) translateY(0px); }
            75%  { transform: translateX(1px) translateY(0px); }
            100% { transform: translateX(0px) translateY(0px); }
        }

        /* Shake animation */
        @keyframes shake {
            0%   { transform: translateX(-5px) translateY(0px); }
            10%  { transform: translateX(5px) translateY(0px); }
            20%  { transform: translateX(-5px) translateY(0px); }
            30%  { transform: translateX(5px) translateY(0px); }
        }

        /* Class to trigger the shake animation */
        .shake {
            animation: shakeII 0.5s ease-in-out infinite;
        }

        .aftermath {
            animation: shake 0.5s ease-in-out infinite;
        }

        .active #starCanvas {
            opacity: 1;
            transition: 2s 0.7s opacity;
        }

        #vignette {
            position: fixed;
            left: 0;
            top: 0;
            right: 0;
            bottom: 0;
            z-index: 10000;
            background: radial-gradient(farthest-corner at center, transparent 30%, rgba(255, 0, 0, 1) 100%);
            pointer-events: none;
            opacity: 0.7; 
        }

        #timeblock, #addendum, #description {
            transition: all 0.3s ease-in-out;
        }

        #shakeContainer {
            opacity: 1;  
            transition: opacity 0.5s ease-in;
            display: block;  
        }

        #timeblock, #addendum, #description {
            opacity: 1;
            transform: scale(1);
        }

        #shakeContainer span {
            color: #FFF;
        }

        #axis1, #axis2, #axis3, #axis4 {
            position: fixed;
            left: 0;
            top: 0;
            right: -63px;
            bottom: 0;
            z-index: 1000;
            background-image: url("https://tm.systemspace.network/unlink/stuff/axis.png");
            background-repeat: repeat;
            pointer-events: none;
            mix-blend-mode: lighten;
            transform: rotate(0.0001deg);
            opacity: 0;

            animation: 1.25s AxisScroll linear infinite;
        }

        #axis2 {
            animation-direction: reverse;
            background-position: 0px 16px;
        }

        #addendum, #description {
            animation: popUp 0.70s ease-out forwards;
        }

        #axis3 {
            animation-duration: 5s;
            background-position: 0px 8px;
        }

        #axis4 {
            animation-duration: 5s;
            animation-direction: reverse;
            background-position: 0px 24px;
        }

        .booting #axis1,
        .booting #axis2,
        .booting #axis3,
        .booting #axis4 {
            opacity: 0.2;
            transition: 3s opacity;
        }

        @keyframes AxisScroll {
            from {
                transform: rotate(0.0001deg) translateX(0px);
            }
            to {
                transform: rotate(0.0001deg) translateX(-63px);
            }
        }
    </style>
</head>
<body>
    <img src="res/img/connected.png" alt="Image" class="fade-image" id="image">
    <div id="circle"></div>
    <div id="colorlay"></div>
    
    
    <div id="vignette"></div>

    <div id="starfield-container"></div>
    <div id="starfield-shake"></div>
    <!-- <canvas id="starCanvas"></canvas> -->


    <div class="move">

        <div class="startAnimation">

            <div id="timeblock">
                <div id="shakeContainer" class="stack"><div class="key">AURORA</div> <span style="color: #FFF;">DISCONNECTED</span></div>
                <div id="shakeContainer" class="stackX"><div class="keyX">LINKING</div> <span style="color: #FFF;">FINALIZING</span></div>
                <div id="counter">
                    <!-- MINUTES ONLY <span id="minutes">00</span><span id="separate">:</span><span id="seconds">00</span><span id="ms">.00</span> -->
                    <span id="minutes">00</span><span id="seperator">:</span><span id="seconds">00</span><span id="dot">.</span><span id="ms">.000</span>
                </div>
            </div>

            <!-- Addendum container -->
            <div id="addendum">
                Once this timer hits 0, Connections to Aurora will be made. After this happens, there will be a Maintenance to ensure a Safe connection.
            </div>
            
            <div id="description">until Aurora is reconnected</div>

        </div>
    
    </div>
    <div id="return">HOSHISPACE.LINK &copy; 2025</div>

    <div id="axis1"></div>
    <div id="axis2"></div>
    <div id="axis3"></div>
    <div id="axis4"></div>

    <script src="res/js/afst.js"></script>

    <script>
        //s
        // etTimeout(showOverlay, 1950);

        let finCall = false;

        let ten1 = false;
        let twenty1 = false;
        let thirty1 = false;
        let forty1 = false;
        let fifty1 = false;

        let sixtyPlayed = false; // Ensure 60-second audio plays only once
        let fiftyPlayed = false;
        let fortyPlayed = false;
        let thirtyPlayed = false;
        let onetwentyPlayed = false;
        let countdownPlayed = false; // Ensure countdown from 20 to 1 plays once
        let lastSecond = -1; // Track the last second that triggered a countdown number

        function animateGradient(duration = 3000) {
            let start = 30; // Initial transparent percentage
            let end = 100; // Final transparent percentage
            let current = start;
            let step = (end - start) / (duration / 16); // Calculate step size per frame

            const vignette = document.getElementById('vignette'); // Target the element

            if (!vignette) {
                console.error("Element #vignette not found!");
                return;
            }

            function updateGradient() {
                if (current >= end) {
                    console.log("Animation complete");
                    return; // Stop when it reaches the end
                }

                console.log(`Current transparent stop: ${current}%`); // Log current value

                vignette.style.background = `radial-gradient(farthest-corner at center, transparent ${current}%, rgba(255, 0, 0, 1) 100%)`;

                current += step; // Increase percentage
                requestAnimationFrame(updateGradient); // Continue animation
            }

            updateGradient();
        }

        function finalCall() {
            if (finCall) return; 
            finCall = true;
    
            final.play();
        }

        function playFifty() {
            if (fifty1) return; 
            fifty1 = true;
    
            let chain = ["number_050", "minutes", "remaining"]; 
            chainSfx(chain);
        }

        function playForty() {
            if (forty1) return; 
            forty1 = true;
    
            let chain = ["number_040", "minutes", "remaining"]; 
            chainSfx(chain);
        }

        function playThirty() {
            if (thirty1) return; 
            thirty1 = true;
    
            let chain = ["number_030", "minutes", "remaining"]; 
            chainSfx(chain);
        }

        function playTwenty() {
            if (twenty1) return; 
            twenty1 = true;
    
            let chain = ["number_020", "minutes", "remaining"]; 
            chainSfx(chain);
        }

        function playTen() {
            if (ten1) return; 
            ten1 = true;
    
            let chain = ["number_010", "minutes", "remaining"]; 
            chainSfx(chain);
        }

        function playSixtyCountdown() {
            if (sixtyPlayed) return; 
            sixtyPlayed = true;
    
            let chain = ["number_060", "seconds", "remaining"]; 
            chainSfx(chain);
        }

        function playFiftyCountdown() {
            if (fiftyPlayed) return; 
            fiftyPlayed = true;
    
            let chain = ["number_050", "seconds", "remaining"]; 
            chainSfx(chain);
        }

        function playFortyCountdown() {
            if (fortyPlayed) return; 
            fortyPlayed = true;
    
            let chain = ["number_040", "seconds", "remaining"]; 
            chainSfx(chain);
        }

        function playthirtyCountdown() {
            if (thirtyPlayed) return; 
            thirtyPlayed = true;
    
            let chain = ["number_030", "seconds", "remaining"]; 
            chainSfx(chain);
        }

        function startTypingAnimation() {
            const element = document.getElementById('return');
            const text = "CONNECTING AURORA...";
            let i = 0;
            element.textContent = ''; // Clear current text
            
            // Add a glowing effect
            element.style.textShadow = "0 0 15px rgba(255, 255, 255, 0.5), 0 0 25px rgba(255, 255, 255, 0.5)";
            element.style.fontSize = "60px";

            const intervalId = setInterval(function() {
            if (i < text.length) {
                element.textContent += text[i]; // Add one character at a time
                i++;
            } else {
                clearInterval(intervalId); // Stop when all characters are added
            }
            }, 250); // Change the 100 to adjust typing speed (milliseconds)
        }

        // Function to shrink and disappear all elements
        function shrinkAndDisappear() {
            const timeblock = document.getElementById('timeblock');
            const addendum = document.getElementById('addendum');
            const description = document.getElementById('description');
            
            // Apply CSS styles to shrink and hide the elements
            timeblock.style.transition = 'all 0.3s ease-in-out';
            addendum.style.transition = 'all 0.3s ease-in-out';
            description.style.transition = 'all 0.3s ease-in-out';

            // Shrink elements
            timeblock.style.transform = 'scale(0)';
            addendum.style.transform = 'scale(0)';
            description.style.transform = 'scale(0)';
            
            // Fade out elements
            timeblock.style.opacity = '0';
            addendum.style.opacity = '0';
            description.style.opacity = '0';
            
            // Optional: Remove elements after transition (to make them truly disappear)
            setTimeout(() => {
                timeblock.style.display = 'none';
                addendum.style.display = 'none';
                description.style.display = 'none';
            }, 300); // matches the duration of the transition
        }

        function removeAllAxes() {
            document.getElementById("axis1")?.remove();
            document.getElementById("axis2")?.remove();
            document.getElementById("axis3")?.remove();
            document.getElementById("axis4")?.remove();
        }

        let originalText = "HOSHISPACE.LINK / RECONNECT";
        let corruptedText = originalText;
        let corruptionLevel = 0;

        function corruptText(text, level) {
            const corruptionChars = ['$', '#', '@', '%', '^', '&', '*', '!', '?', '~', '1', '2', '3', '4', '5'];
            let corrupted = text.split('');
            
            // Add corruption by replacing some characters with random ones
            for (let i = 0; i < level; i++) {
                const randomIndex = Math.floor(Math.random() * corrupted.length);
                const randomChar = corruptionChars[Math.floor(Math.random() * corruptionChars.length)];
                corrupted[randomIndex] = randomChar;
            }

            return corrupted.join('');
        }

        function updateText() {
            if (corruptionLevel <= 5) {
                corruptedText = corruptText(originalText, corruptionLevel);
                document.getElementById("return").innerText = corruptedText;
                corruptionLevel++;
            }
        }

        // Run the updateText function every minute (60000 milliseconds)
        setInterval(updateText, 60000);

        function showOverlay() {
            // Create the overlay element
            const overlay = document.createElement('div');
            overlay.classList.add('overlay');

            // Append it to the body
            document.body.appendChild(overlay);

            // Show the overlay by changing the display property
            setTimeout(() => {
                overlay.style.display = 'block';
            }, 1000); // Delay to show overlay (1 second in this case)
        }

        // Function to change text to "CONNECTED"
        function fadeInAndConnect() {
            const shakeContainer = document.getElementById('shakeContainer');
            const statusText = shakeContainer.querySelector('span');

            // Ensure shakeContainer is visible
            shakeContainer.style.display = 'block'; // Ensure it's visible
            shakeContainer.style.transition = 'opacity 0.5s ease-in';

            // Start with the fade-in transition by changing opacity to 1
            shakeContainer.style.opacity = '1';

            // Change text from DISCONNECTED to CONNECTED
            statusText.textContent = 'CONNECTED';
        }

        function removeOverlay() {
            const overlay = document.getElementById('overlay');
            if (overlay) {
                overlay.remove();  // Remove the div from the DOM
            }
        }

        function removeColorlay() {
            const colorlay = document.getElementById('colorlay');
            if (colorlay) {
                colorlay.remove();  // Remove the div from the DOM
            }
        }
    
        // Helper function to play countdown from 20 to 1 seconds
        function playCountdown() {
            if (countdownPlayed) return; // Prevent multiple triggers for countdown
            countdownPlayed = true;
    
            let i = 20;
            let countdownInterval = setInterval(function() {
                let chain = [formatNumberForSpeech(i)]; // Only the number (20, 19, etc.)
                chainSfx(chain);
    
                i--; // Decrease the number after each call
    
                if (i < 1) {
                    clearInterval(countdownInterval); // Stop when the countdown is done
                }
            }, 1000); // 1-second interval between each countdown number
        }

        function triggerFlash() {
            // Create the flash div
            const flashDiv = document.createElement('div');
            flashDiv.classList.add('flash');
        
            // Append to the body
            document.body.appendChild(flashDiv);
            
            // Trigger the animation
            flashDiv.style.animation = 'flashAnimation 1s ease-out forwards';
            
            // Remove the flash div after the animation ends
            flashDiv.addEventListener('animationend', () => {
                flashDiv.remove();
            });
        }
    
        // Helper function to chain the sound effects
        function chainSfx(chain) {
            let el = chain.shift();
            if (!el) return; // Stop when chain is empty
            new Howl({
                src: `https://theprojectofficial.github.io/res/audio/sfx/speech_${el}_en.ogg`,
                autoplay: true,
                volume: 1.5,
                onend: function () {
                    chainSfx(chain); // Play the next sound in the chain
                }
            });
        }

        function setBackgroundToBlack() {
            document.body.style.background = "black"; // Sets the background to solid black
            document.body.style.backgroundImage = "none"; // Remove any gradient or background image
        }

        function animateGradient(duration = 3000) {
            let start = 30; // Initial transparent percentage
            let end = 100; // Final transparent percentage
            let current = start;
            let step = (end - start) / (duration / 100); // Calculate step size per frame

            const vignette = document.getElementById('vignette'); // Target the element

            if (!vignette) {
                console.error("Element #vignette not found!");
                return;
            }

            function updateGradient() {
                if (current >= end) {
                    console.log("Animation complete");
                    return; // Stop when it reaches the end
                }

                console.log(`Current transparent stop: ${current}%`); // Log current value

                vignette.style.background = `radial-gradient(farthest-corner at center, transparent ${current}%, rgba(255, 0, 0, 1) 100%)`;

                current += step; // Increase percentage
                requestAnimationFrame(updateGradient); // Continue animation
            }

            updateGradient();
        }

        function fadeOutElements() {
            // Select elements you want to fade out
            document.querySelectorAll("#timeblock, #addendum, #description").forEach(el => {
                el.classList.add("fade-out"); // Add the fade-out class to trigger animation
            });
        }
    
        // Helper function to format numbers with zero-padding
        function formatNumberForSpeech(num) {
            return `number_${num.toString().padStart(3, "0")}`;
        }

        function finalcall() {
            final.play();
        }

        function fadeInImage() {
            const image = document.getElementById('image');
            image.style.opacity = 1; // Make the image visible with a fade effect
        }
    
        // Set the target date for the countdown (example: 2025, March 5th, 12:00:00)
        const targetDate = new Date("April 1, 2025 22:50:00").getTime();
        
        let fadeInitiated = false;
    
        // Update the countdown every 10 milliseconds
        const timerInterval = setInterval(function() {
            const now = new Date().getTime(); // Get current time
            const timeRemaining = targetDate - now; // Calculate time remaining

            //if (timeRemaining <= 3000000 && !fifty1) {
                //playFifty();
            //}

            //if (timeRemaining <= 2400000 && !forty1) {
                //playForty();
            //}

            //if (timeRemaining <= 1800000 && !thirty1) {
                //playThirty();
            //}

            if (timeRemaining <= 1200000 && !twenty1) {
                playTwenty();
            }

            if (timeRemaining <= 600000 && !ten1) {
                playTen();
            }

            if (timeRemaining <= 60000 && !sixtyPlayed) {
                console.log("Triggering 60-second countdown audio...");
                playSixtyCountdown();
            }

            if (timeRemaining <= 50000 && !fiftyPlayed) {
                console.log("Triggering 50-seconds countdown audio...");
                playFiftyCountdown();
            }

            if (timeRemaining <= 40000 && !fortyPlayed) {
                console.log("Triggering 40-seconds countdown audio...");
                playFortyCountdown();
            }

            if (timeRemaining <= 30000 && !thirtyPlayed) {
                console.log("Triggering 30-seconds countdown audio...");
                playthirtyCountdown();
            }
    
            if (timeRemaining <= 22000 && !countdownPlayed) {
                console.log("Triggering countdown from 20 seconds...");
                playCountdown();
            }

            if (timeRemaining <= 20000) {
                console.log("Font increase");
                increaseFontSize();
                //animateVignette(5000, 30, -30);
            }
    
            if (timeRemaining <= 30000 && !fadeInitiated) {
                console.log("Successfully checked 30 seconds left");
    
                // Initiate the fade out effect for audio2
                audio2.fade(audio2.volume(), 0, 10000); // Fade audio2 from its current volume to 0 over 10 seconds
                fadeInitiated = true; // Set the flag to prevent multiple fade executions
            }
            
            if (timeRemaining <= 6000) {
                finalCall();
                animateGradient();
            }

            if (timeRemaining <= 500) {
                //disappearFast();
                //shrinkAndDisappear();
                //fadeOutStars();
                //fadeOutElements();
                document.getElementById("return").classList.add("shake");
                document.getElementById("timeblock").classList.add("shake");
            }
    
            // If the countdown is finished, stop the interval
            if (timeRemaining <= 0) {
                triggerFlash();
                corruptColor();
                corruption.play();
                audio1.stop();
                audio2.stop();
                clearInterval(timerInterval);
                StarfieldShaker();
                removeAllAxes();

                const element = document.getElementById('return');
                element.style.position = 'absolute';
                element.style.top = '45%';
                element.style.left = '0%';
                element.style.transform = 'translate(-50%, -50%)';
                element.style.fontSize = "60px";

                //

                setTimeout(() => {
                    let statusSpan = document.querySelector("#shakeContainer span");
                    if (statusSpan) {
                        statusSpan.textContent = "CONNECTED";
                    }
                }, 100);

                console.log(document.querySelector("#shakeContainer span"));

                clearInterval(timerInterval); // Stop the timer
                document.getElementById("counter").innerHTML = "???";
                return;
            }
    
           // Calculate minutes, seconds, and milliseconds
            //const minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));
            //const seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000);
            //const milliseconds = timeRemaining % 1000; // Ensures milliseconds range from 0 to 999

            //const days = Math.floor(timeRemaining / (1000 * 60 * 60 * 24)); // Calculate the number of days
            //const hours = Math.floor((timeRemaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)); // Calculate hours remaining
            const minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60)); // Calculate minutes remaining
            const seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000); // Calculate seconds remaining
            const milliseconds = timeRemaining % 1000; // Calculate milliseconds remaining

            // Update the countdown display
            //document.getElementById("days").textContent = String(days).padStart(2, '0'); // Render days
            //document.getElementById("hours").textContent = String(hours).padStart(2, '0');
            document.getElementById("minutes").textContent = String(minutes).padStart(2, '');
            document.getElementById("seconds").textContent = String(seconds).padStart(2, '0');
            document.getElementById("ms").textContent = String(milliseconds).padStart(3, '0'); // Adjusted for 3-digit display

        }, 10); // Update every 10ms for precision
    
        // Activate the appearance of #timeblock and #addendum by adding the 'active' class
        const addActiveClass = (elementId, delay) => {
            setTimeout(() => {
                document.body.classList.add(elementId);
            }, delay);
        }
    
        // Use function to add 'active' and 'booting' classes with specific delays
        addActiveClass('active', 500); // Add 'active' class after 500ms
        addActiveClass('booting', 1000); // Add 'booting' class after 1000ms

        let size = 9.5 // Starting font-size in vw
        let msSize = 4.5;
        const maxSize = 12; // Target font-size in vw
        const msMaxSize = 6;
        let interval = null; // Store interval reference

        // ðŸŸ¢ Slow Increase Function
        function increaseFontSize() {
            if (interval) return; // Prevent multiple intervals

            interval = setInterval(() => {
                if (size >= maxSize) {
                    clearInterval(interval);
                    interval = null; // Reset interval reference
                } else {
                    size += 0.01; // Slower increase
                    msSize += 0.01;
                    
                    document.getElementById("minutes").style.fontSize = `${size}vw`;
                    document.getElementById("seconds").style.fontSize = `${size + 0.7}vw`;
                    document.getElementById("seperate").style.fontSize = `${size + 0.7}vw`;
                    document.getElementById("ms").style.fontSize = `${msSize}vw`;
                }
            }, 100); // Slower updates for smooth effect
        }

        // ðŸ”´ Fast Shrink & Disappear Function
        function disappearFast() {
            clearInterval(interval); // Stop any ongoing growth
            interval = null;

            let shrinkInterval = setInterval(() => {
                if (size <= 1) { // Once small enough, hide completely
                    clearInterval(shrinkInterval);
                    document.getElementById("minutes").style.opacity = "0";
                    document.getElementById("seconds").style.opacity = "0";
                    document.getElementById("seperate").style.opacity = "0";
                    document.getElementById("ms").style.opacity = "0";
                } else {
                    size -= 0.5; // Rapid decrease
                    msSize -= 0.2;
                    
                    document.getElementById("minutes").style.fontSize = `${size}vw`;
                    document.getElementById("seconds").style.fontSize = `${size + 0.7}vw`;
                    document.getElementById("seperate").style.fontSize = `${size + 0.7}vw`;
                    document.getElementById("ms").style.fontSize = `${msSize}vw`;
                }
            }, 30); // Fast shrinking effect
        }

    </script>    
    <script>
        const canvas = document.getElementById('starCanvas');
        const ctx = canvas.getContext('2d');

        // Function to initiate fading out of all stars to nothing
        function fadeOutStarsToNothing() {
            // Gradually reduce the opacity of each star to 0
            let fadeInterval = setInterval(() => {
                stars.forEach(star => {
                    star.fadeOut -= 0.05; // Gradually decrease opacity
                    if (star.fadeOut <= 0) {
                        star.fadeOut = 0; // Ensure opacity doesn't go below 0
                    }
                });

                // If all stars are fully faded out, stop the interval
                if (stars.every(star => star.fadeOut === 0)) {
                    clearInterval(fadeInterval); // Stop the fade-out process
                }
            }, 50); // Fade out every 50 milliseconds
        }

        // Function to change star color to black and add shaking effect
        function makeStarsBlackAndShake() {
            // Add shake effect to each star with extreme shake
            stars.forEach(star => {
                const shakeX = (Math.random() - 0.5) * 100;  // Increased horizontal shake range
                const shakeY = (Math.random() - 0.5) * 100;  // Increased vertical shake range
        
                star.x += shakeX;
                star.y += shakeY;
            });
        }

        // Resize canvas to cover the entire window
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Get the user's position (this could be mouse position or a fixed point)
        let userX = canvas.width / 2;
        let userY = canvas.height / 2;

        // Initial star color
        let starColor = "rgba(255, 255, 255, 0.8)";

        // Generate stars
        const stars = [];
        for (let i = 0; i < 200; i++) {
            let x = Math.random() * canvas.width;
            let y = Math.random() * canvas.height;
            let angle = Math.atan2(y - userY, x - userX); // Calculate angle from user position
            let speed = (Math.random() * 100 + 100) * 500; // Increase speed multiplier for faster movement

            stars.push({
                x,
                y,
                angle,
                speed,
                fadeOut: Math.random() * 0.5 + 0.5, // Random opacity for each star
            });
        }

        // Function to fade out all stars
        function fadeOutStars() {
            stars.forEach(star => {
                star.fadeOut -= 0.01; // Gradually decrease opacity
                if (star.fadeOut < 0) star.fadeOut = 0; // Ensure opacity doesn't go below 0
            });
        }

        // Function to trigger extreme shake
        function startExtremeShake() {
            // Trigger extreme shake
            makeStarsBlackAndShake();
        
            // Optionally, you can trigger this with a set interval to keep shaking stars
            setInterval(makeStarsBlackAndShake, 50); // Shake every 50 milliseconds for continuous shaking
        }

        // Function to animate the stars
        function animateStars() {
            ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear canvas for smoother animation
            ctx.strokeStyle = starColor; // Use the dynamic star color (black if set)
            ctx.lineWidth = 2;
            ctx.shadowBlur = 8;
            ctx.shadowColor = "rgba(255, 255, 255, 0.5)";

            stars.forEach(star => {
                // Move stars away from the user's position (increase speed multiplier)
                star.x += Math.cos(star.angle) * star.speed * 1.5; // Increase speed
                star.y += Math.sin(star.angle) * star.speed * 1.5;

                // Apply fade-out effect
                ctx.globalAlpha = star.fadeOut; // Set the opacity of the star

                // Draw the star as a line (not a dot)
                let endX = star.x + Math.cos(star.angle) * 8; // Increase streak length
                let endY = star.y + Math.sin(star.angle) * 8;

                ctx.beginPath();
                ctx.moveTo(star.x, star.y);
                ctx.lineTo(endX, endY); // Draw line from the star's position
                ctx.stroke();

                // Reset star if it goes off the canvas
                if (star.x < 0 || star.x > canvas.width || star.y < 0 || star.y > canvas.height) {
                    let angle = Math.random() * Math.PI * 2;
                    let speed = (Math.random() * 3 + 1.5) * 2; // Reset with increased speed
                    star.x = userX + Math.cos(angle) * 50;
                    star.y = userY + Math.sin(angle) * 50;
                    star.angle = angle;
                    star.speed = speed;
                    star.fadeOut = Math.random() * 0.5 + 0.5; // Reset the opacity when the star is reset
                }
            });

            // Smooth the animation with requestAnimationFrame
            requestAnimationFrame(animateStars);
        }

        // Call the function to start animating the stars
        animateStars();
    </script>
</body>
</html>
